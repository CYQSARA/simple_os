write simple os.

boot loader loaded the kernel loader (kernel_loader/kloaderp.bin) to 0x9000:0x0100.

in kernel loader, init c runtime, then use c code (16 bit) read kerenl (elf) to memory (by bios 0x13), 
then enter protected mode.

in protected mode, copy the the p_kernel.elf (c code, in the state, only can use stack variable)
follow the elf header information (Program Headers:).
then jump to the kernel address (elf entry point address).

kloaderp.bin load p_kernel.elf to 

KERNEL_ES:LOAD_KERNEL_OFFSET (can more than 64k)

than copy p_kernel.elf by elf 
information to absolute address 0x5000.
kernel load address depends k.ld (. = 0x5000), current is 0x5000,
p_kernel.elf entry pointer is 0x5000.

ramdisk is loaded by kloaderp.bin to 

RAMDISK_ES:LOAD_KERNEL_OFFSET

ramdisk filesystem is romfs.

note:
KERNEL_ES:LOAD_KERNEL_OFFSET
RAMDISK_ES:LOAD_KERNEL_OFFSET
see include/kl_global.h

tty design:
0, 1, 2 text mode alt+f1, alt+f2, alt+f3
3 graphic mode alt+f7
now if switch to graphic mode tty, cannot to switch text mode tty.

